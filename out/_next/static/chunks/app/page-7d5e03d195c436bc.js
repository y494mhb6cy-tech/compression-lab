(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5267:function(e,t,s){Promise.resolve().then(s.bind(s,8499))},8499:function(e,t,s){"use strict";s.d(t,{default:function(){return E}});var a=s(7437),l=s(2265);function n(e){let{title:t,subtitle:s,children:l}=e;return(0,a.jsxs)("section",{className:"glass-card animate-fade-up flex flex-col gap-4 rounded-2xl p-5 md:p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("h2",{className:"text-lg font-display font-semibold text-white",children:t}),s?(0,a.jsx)("p",{className:"text-sm text-muted",children:s}):null]}),(0,a.jsx)("div",{className:"h-64 w-full md:h-72",children:l})]})}let r=[{label:"26 weeks",value:26},{label:"52 weeks",value:52},{label:"104 weeks",value:104}];function i(e){let{categories:t,selectedCategory:s,selectedRange:l,showEvents:n,onCategoryChange:i,onRangeChange:c,onToggleEvents:o}=e;return(0,a.jsxs)("section",{className:"glass-card flex flex-wrap items-center gap-4 rounded-2xl p-4 md:p-5",children:[(0,a.jsxs)("div",{className:"flex min-w-[180px] flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-muted",children:"Category"}),(0,a.jsx)("select",{className:"rounded-xl border border-line/70 bg-canvas/60 px-3 py-2 text-sm text-white outline-none transition focus:border-accent",value:s,onChange:e=>i(e.target.value),children:t.map(e=>(0,a.jsx)("option",{value:e,className:"bg-canvas",children:e},e))})]}),(0,a.jsxs)("div",{className:"flex min-w-[180px] flex-col gap-2",children:[(0,a.jsx)("span",{className:"text-xs uppercase tracking-[0.3em] text-muted",children:"Time Range"}),(0,a.jsx)("select",{className:"rounded-xl border border-line/70 bg-canvas/60 px-3 py-2 text-sm text-white outline-none transition focus:border-accent",value:l,onChange:e=>c(Number(e.target.value)),children:r.map(e=>(0,a.jsx)("option",{value:e.value,className:"bg-canvas",children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-3 text-sm text-muted",children:[(0,a.jsx)("span",{children:"Show synchronization events"}),(0,a.jsx)("button",{type:"button",className:"relative h-6 w-11 rounded-full border border-line/60 transition ".concat(n?"bg-accent/60":"bg-canvas/80"),onClick:()=>o(!n),"aria-pressed":n,children:(0,a.jsx)("span",{className:"absolute top-0.5 h-4 w-4 rounded-full bg-white transition ".concat(n?"left-6":"left-1")})})]})]})}var c=s(5231),o=s(7618),d=s(4142),x=s(2842),u=s(9542),m=s(5475),h=s(6638);function g(e){let{data:t,formatWeek:s}=e;return(0,a.jsx)(c.h,{width:"100%",height:"100%",children:(0,a.jsxs)(o.c,{data:t,margin:{left:10,right:24,top:10,bottom:10},children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",className:"chart-grid"}),(0,a.jsx)(x.K,{dataKey:"week",tickFormatter:s,tick:{className:"axis-muted"}}),(0,a.jsx)(u.B,{yAxisId:"left",tick:{className:"axis-muted"},domain:[0,1],tickFormatter:e=>e.toFixed(2)}),(0,a.jsx)(u.B,{yAxisId:"right",orientation:"right",tick:{className:"axis-muted"},tickFormatter:e=>e.toFixed(2)}),(0,a.jsx)(m.u,{contentStyle:{background:"#0b1220",border:"1px solid rgba(51, 65, 85, 0.6)"},labelFormatter:e=>"Week of ".concat(e)}),(0,a.jsx)(h.x,{yAxisId:"left",type:"monotone",dataKey:"avgAbsCorrelation",stroke:"rgba(94, 234, 212, 0.9)",strokeWidth:2.5,dot:!1}),(0,a.jsx)(h.x,{yAxisId:"right",type:"monotone",dataKey:"correlationVelocity",stroke:"rgba(251, 146, 60, 0.9)",strokeWidth:2,dot:!1})]})})}let p=(e,t,s)=>Math.max(t,Math.min(s,e)),f=e=>{let t=p(e,-1,1),s=.15+.6*Math.abs(t);return t>=0?"rgba(34, 211, 238, ".concat(s.toFixed(2),")"):"rgba(251, 146, 60, ".concat(s.toFixed(2),")")},j=e=>e.replace(/_/g," "),v=(0,l.memo)(function(e){let{signals:t,matrix:s}=e;if(!s||0===s.length)return(0,a.jsx)("div",{className:"flex h-full items-center justify-center text-sm text-muted",children:"Not enough data to compute the latest correlations."});let l=t.length;return(0,a.jsx)("div",{className:"h-full overflow-auto",children:(0,a.jsxs)("div",{className:"grid gap-2",style:{gridTemplateColumns:"120px repeat(".concat(l,", minmax(48px, 1fr))")},children:[(0,a.jsx)("div",{}),t.map(e=>(0,a.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-muted",children:j(e)},e)),t.map((e,l)=>(0,a.jsxs)("div",{className:"contents",children:[(0,a.jsx)("div",{className:"text-xs font-semibold text-slate-100",children:j(e)}),t.map((t,n)=>{var r,i;let c=null!==(i=null===(r=s[l])||void 0===r?void 0:r[n])&&void 0!==i?i:0;return(0,a.jsx)("div",{className:"flex h-9 items-center justify-center rounded-lg border border-line/60 text-xs text-slate-100",style:{backgroundColor:f(c)},title:"".concat(j(e)," x ").concat(j(t),": ").concat(c.toFixed(2)),children:c.toFixed(2)},"".concat(e,"-").concat(t))})]},e))]})})});function b(e){let{title:t,body:s,bullets:l,weekLabel:n}=e,r=s.split("\n").filter(Boolean);return(0,a.jsxs)("section",{className:"glass-card animate-fade-up flex flex-col gap-4 rounded-2xl p-5 md:p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-muted",children:"Interpretation"}),(0,a.jsx)("h3",{className:"text-xl font-display font-semibold text-white",children:t})]}),(0,a.jsxs)("span",{className:"rounded-full border border-line/60 px-3 py-1 text-xs text-muted",children:["Week of ",n]})]}),(0,a.jsx)("div",{className:"space-y-3 text-sm text-slate-200",children:r.map(e=>(0,a.jsx)("p",{children:e},e))}),(0,a.jsx)("ul",{className:"space-y-2 text-sm text-slate-200",children:l.map(e=>(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"mt-1 h-2 w-2 rounded-full bg-accent"}),(0,a.jsx)("span",{children:e})]},e))}),(0,a.jsx)("p",{className:"text-xs text-muted",children:"No prediction. Pattern-only. Correlation â‰  causation."})]})}var N=s(2566);let y=e=>{var t;return(null===(t=e.payload)||void 0===t?void 0:t.syncEvent)?(0,a.jsx)("circle",{cx:e.cx,cy:e.cy,r:4,fill:"rgba(251, 191, 36, 0.9)",stroke:"rgba(15, 23, 42, 0.9)",strokeWidth:1}):(0,a.jsx)("circle",{cx:e.cx,cy:e.cy,r:0,fill:"none"})};function k(e){let{data:t,showEvents:s,formatWeek:l}=e;return(0,a.jsx)(c.h,{width:"100%",height:"100%",children:(0,a.jsxs)(N.w,{data:t,margin:{left:10,right:24,top:10,bottom:10},children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",className:"chart-grid"}),(0,a.jsx)(x.K,{dataKey:"week",tickFormatter:l,tick:{className:"axis-muted"}}),(0,a.jsx)(u.B,{tick:{className:"axis-muted"}}),(0,a.jsx)(m.u,{contentStyle:{background:"#0b1220",border:"1px solid rgba(51, 65, 85, 0.6)"},labelFormatter:e=>"Week of ".concat(e)}),(0,a.jsx)(h.x,{type:"monotone",dataKey:"varianceIndex",stroke:"rgba(34, 211, 238, 0.9)",strokeWidth:2.5,dot:!!s&&y,activeDot:!1})]})})}async function w(e){let t=await fetch(e,{cache:"no-store"});if(!t.ok)throw Error("Failed to load ".concat(e));return t.json()}let C=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}),F=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return null==e||Number.isNaN(e)?"n/a":e.toFixed(t)},A={series:null,metrics:null,insights:null,error:null};function E(){var e,t,s,r,c;let[o,d]=(0,l.useState)(A),[x,u]=(0,l.useState)("All"),[m,h]=(0,l.useState)(52),[p,f]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{try{let[e,t,s]=await Promise.all([w("/data/series.json"),w("/data/metrics.json"),w("/data/insights.json")]);d({series:e,metrics:t,insights:s,error:null}),t.categories.length>0&&u(t.categories[0])}catch(t){let e=t instanceof Error?t.message:"Failed to load data.";d({...A,error:e})}})()},[]);let j=(0,l.useMemo)(()=>{var e;return o.metrics&&null!==(e=o.metrics.byCategory.find(e=>e.category===x))&&void 0!==e?e:null},[o.metrics,x]),N=(0,l.useMemo)(()=>{if(!j)return[];let e=Math.max(0,j.weekly.length-m);return j.weekly.slice(e)},[j,m]),y=null!==(t=null===(e=N.at(-1))||void 0===e?void 0:e.week)&&void 0!==t?t:null,E=null!==(s=N.at(-1))&&void 0!==s?s:null,M=(0,l.useMemo)(()=>{if(!j||!y)return null;let e=j.correlationMatrices.find(e=>e.week===y);return null!=e?e:null},[j,y]),I=(0,l.useMemo)(()=>{var e;if(!o.insights||!y)return null;let t=o.insights.byCategory.find(e=>e.category===x);if(!t)return null;let s=[...t.insights].reverse().find(e=>e.week<=y);return null!==(e=null!=s?s:t.insights.at(-1))&&void 0!==e?e:null},[o.insights,x,y]);if(o.error)return(0,a.jsxs)("section",{className:"glass-card rounded-2xl p-6 text-sm text-rose-200",children:[o.error," Try running `npm run generate:data`."]});if(!o.metrics||!o.series||!o.insights)return(0,a.jsx)("section",{className:"glass-card rounded-2xl p-6 text-sm text-muted",children:"Loading signals..."});let W=o.metrics.categories;return(0,a.jsxs)("section",{className:"flex flex-col gap-6",children:[(0,a.jsx)(i,{categories:W,selectedCategory:x,selectedRange:m,showEvents:p,onCategoryChange:u,onRangeChange:h,onToggleEvents:f}),(0,a.jsxs)("section",{className:"grid gap-4 md:grid-cols-4",children:[(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-muted",children:"Variance Index"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-display text-white",children:S(null==E?void 0:E.varianceIndex,2)}),(0,a.jsx)("p",{className:"text-xs text-muted",children:"Compression if trending downward."})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-muted",children:"Avg Abs Corr"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-display text-white",children:S(null==E?void 0:E.avgAbsCorrelation,2)}),(0,a.jsx)("p",{className:"text-xs text-muted",children:"Higher means signals move together."})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-muted",children:"Correlation Velocity"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-display text-white",children:S(null==E?void 0:E.correlationVelocity,2)}),(0,a.jsx)("p",{className:"text-xs text-muted",children:"Positive = strengthening alignment."})]}),(0,a.jsxs)("div",{className:"glass-card rounded-2xl p-4",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-muted",children:"Cluster Stability"}),(0,a.jsx)("p",{className:"mt-2 text-2xl font-display text-white",children:S(null==E?void 0:E.clusterStability,2)}),(0,a.jsx)("p",{className:"text-xs text-muted",children:"Share of signals staying in clusters."})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsx)(n,{title:"Variance Index",subtitle:"Lower variance across signals implies compression.",children:(0,a.jsx)(k,{data:N,showEvents:p,formatWeek:C})}),(0,a.jsx)(n,{title:"Correlation Alignment",subtitle:"Avg absolute correlation plus week-to-week velocity.",children:(0,a.jsx)(g,{data:N,formatWeek:C})})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1.4fr_1fr]",children:[(0,a.jsx)(n,{title:"Latest Correlation Matrix",subtitle:"Rolling 6-week correlations by signal.",children:(0,a.jsx)(v,{signals:null!==(r=null==M?void 0:M.signals)&&void 0!==r?r:[],matrix:null!==(c=null==M?void 0:M.matrix)&&void 0!==c?c:null})}),I&&y?(0,a.jsx)(b,{title:I.title,body:I.body,bullets:I.bullets,weekLabel:F(y)}):(0,a.jsx)(b,{title:"Awaiting data",body:"Run the generator to populate insights.",bullets:[],weekLabel:"n/a"})]})]})}}},function(e){e.O(0,[0,971,23,744],function(){return e(e.s=5267)}),_N_E=e.O()}]);